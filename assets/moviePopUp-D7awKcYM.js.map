{"version":3,"file":"moviePopUp-D7awKcYM.js","sources":["../../src/js/moviePopUp.js"],"sourcesContent":["// moviePopup.js\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  if (!document.getElementById(\"movie-popup-overlay\")) {\n    const popupOverlay = document.createElement(\"div\");\n    popupOverlay.id = \"movie-popup-overlay\";\n    popupOverlay.style.cssText = `\n      display:none; position:fixed; top:0; left:0; width:100%; height:100%;\n      background-color:rgba(0, 0, 0, 0.8); z-index:9999; align-items:center; justify-content:center;\n    `;\n    document.body.appendChild(popupOverlay);\n\n    popupOverlay.addEventListener(\"click\", (e) => {\n      if (e.target === popupOverlay) closeMoviePopup();\n    });\n\n    document.addEventListener(\"keydown\", (e) => {\n      if (e.key === \"Escape\") closeMoviePopup();\n    });\n  }\n\n  setupMovieCardListeners();\n});\n\nfunction addMovieIdsToCards() {\n  document.querySelectorAll(\".movie-card\").forEach((card) => {\n    card.style.cursor = \"pointer\";\n    if (!card.dataset.movieId) {\n      const title = card.querySelector(\"h3\")?.textContent;\n      if (title) searchForMovieId(title, card);\n    }\n  });\n}\n\nasync function searchForMovieId(title, element) {\n  try {\n    const apiKey = \"6c6ff1eefb34466f1e524e319f306b8f\";\n    const url = `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&language=tr-TR&query=${encodeURIComponent(\n      title\n    )}`;\n    const response = await fetch(url);\n    const data = await response.json();\n    if (data.results?.length > 0) {\n      element.dataset.movieId = data.results[0].id;\n    }\n  } catch (error) {\n    console.error(\"Movie ID search error:\", error);\n  }\n}\n\nfunction setupMovieCardListeners() {\n  addMovieIdsToCards();\n\n  document.body.addEventListener(\"click\", function (e) {\n    const movieCard = e.target.closest(\".movie-card\");\n    if (!movieCard) return;\n\n    const movieId = movieCard.dataset.movieId;\n    if (movieId) {\n      showMoviePopup(movieId);\n    } else {\n      const title = movieCard.querySelector(\"h3\")?.textContent;\n      if (title) searchAndShowMovie(title);\n    }\n  });\n}\n\nasync function searchAndShowMovie(title) {\n  try {\n    const apiKey = \"6c6ff1eefb34466f1e524e319f306b8f\";\n    const url = `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&language=tr-TR&query=${encodeURIComponent(\n      title\n    )}`;\n    const response = await fetch(url);\n    const data = await response.json();\n    if (data.results?.length > 0) {\n      showMoviePopup(data.results[0].id);\n    }\n  } catch (error) {\n    console.error(\"Search and show error:\", error);\n  }\n}\n\nasync function showMoviePopup(movieId) {\n  const popupOverlay = document.getElementById(\"movie-popup-overlay\");\n  if (!popupOverlay) return;\n\n  popupOverlay.innerHTML = `<div style=\"...\">Loading...</div>`;\n  popupOverlay.style.display = \"flex\";\n\n  try {\n    const apiKey = \"6c6ff1eefb34466f1e524e319f306b8f\";\n    const url = `https://api.themoviedb.org/3/movie/${movieId}?api_key=${apiKey}&language=tr-TR`;\n    const response = await fetch(url);\n    const movie = await response.json();\n\n    const isMobile = window.innerWidth < 768;\n    const popupContent = document.createElement(\"div\");\n    popupContent.style.cssText = `\n      position:absolute; top:50%; left:50%; transform:translate(-50%, -50%);\n      background-color:#222; color:white; padding:20px; border-radius:10px;\n      width:90%; max-width:800px; max-height:80vh; overflow:auto; box-shadow:0 0 20px rgba(248, 119, 25, 0.3);\n    `;\n\n    popupContent.innerHTML = `\n      <div style=\"position:relative;\">\n        <span style=\"position:absolute; top:0; right:0; font-size:24px; cursor:pointer; color:#aaa;\">&times;</span>\n        <div class=\"popup-content-wrapper\" style=\"display:flex; flex-direction:${\n          isMobile ? \"column\" : \"row\"\n        }; gap:15px;\">\n          <div class=\"popup-image\" style=\"${\n            !isMobile ? \"flex:0 0 40%;\" : \"\"\n          } text-align:center;\">\n            <img src=\"https://image.tmdb.org/t/p/w500${\n              movie.poster_path\n            }\" alt=\"${\n      movie.title\n    }\" style=\"max-width:100%; max-height:300px; object-fit:contain; border-radius:8px;\">\n          </div>\n          <div class=\"popup-details\" style=\"${\n            !isMobile ? \"flex:1;\" : \"\"\n          } display:flex; flex-direction:column;\">\n            <h2 style=\"color:#f87719;\">${movie.title}</h2>\n            <p><strong>Release Date:</strong> ${movie.release_date}</p>\n            <p><strong>Rating:</strong> ${movie.vote_average}/10</p>\n            <p><strong>Genres:</strong> ${movie.genres\n              .map((g) => g.name)\n              .join(\", \")}</p>\n            <h3>Overview</h3>\n            <p>${movie.overview || \"No overview available.\"}</p>\n            <button id=\"add-to-library\" style=\"margin-top:auto; padding:10px 15px; background:linear-gradient(141.22deg, #ffc226 9.4%, #f84119 91.91%); color:white; border:none; border-radius:74px; cursor:pointer;\">Add to my library</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    popupOverlay.innerHTML = \"\";\n    popupOverlay.appendChild(popupContent);\n\n    popupContent\n      .querySelector(\"span\")\n      .addEventListener(\"click\", closeMoviePopup);\n\n    popupContent\n      .querySelector(\"#add-to-library\")\n      .addEventListener(\"click\", function () {\n        addToLibrary(movie);\n        this.textContent = \"Added to library\";\n        this.style.opacity = \"0.7\";\n        this.disabled = true;\n      });\n  } catch (error) {\n    popupOverlay.innerHTML = `<div style=\"...\">Error loading movie details.<button onclick=\"closeMoviePopup()\">Close</button></div>`;\n  }\n}\n\nfunction addToLibrary(movie) {\n  let myLibrary = JSON.parse(localStorage.getItem(\"movieLibrary\") || \"[]\");\n\n  if (!myLibrary.some((item) => item.id === movie.id)) {\n    myLibrary.push({\n      id: movie.id,\n      title: movie.title,\n      poster_path: movie.poster_path,\n      release_date: movie.release_date,\n      vote_average: movie.vote_average,\n      genre_ids: movie.genres.map((g) => g.id),\n      added_date: new Date().toISOString(),\n    });\n    localStorage.setItem(\"movieLibrary\", JSON.stringify(myLibrary));\n  }\n}\n\nfunction closeMoviePopup() {\n  const popupOverlay = document.getElementById(\"movie-popup-overlay\");\n  if (popupOverlay) popupOverlay.style.display = \"none\";\n}\n\nsetInterval(addMovieIdsToCards, 3000);\nwindow.closeMoviePopup = closeMoviePopup;\n"],"names":["popupOverlay","e","closeMoviePopup","setupMovieCardListeners","addMovieIdsToCards","card","_a","title","searchForMovieId","element","url","data","error","movieCard","movieId","showMoviePopup","searchAndShowMovie","movie","isMobile","popupContent","g","addToLibrary","myLibrary","item"],"mappings":"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"}